syntax = "proto3";

package meme.posts;
option go_package = "github.com/materkov/meme9/api/posts";

// Posts service
service Posts {
  rpc Publish(PublishRequest) returns (PublishResponse);
  rpc GetByUsers(GetByUsersRequest) returns (GetByUsersResponse);
  rpc Get(GetPostRequest) returns (GetPostResponse);
}

message PublishRequest {
  string text = 1;
}

message PublishResponse {
  string id = 1;
}

message GetByUsersRequest {
  string user_id = 1;
}

message UserPostResponse {
  string id = 1;
  string text = 2;
  string user_id = 3;
  string username = 4;
  string created_at = 5; // RFC3339 format
}

message GetByUsersResponse {
  repeated UserPostResponse posts = 1;
}

message GetPostRequest {
  string post_id = 1;
}

message GetPostResponse {
  string id = 1;
  string text = 2;
  string user_id = 3;
  string created_at = 4; // RFC3339 format
}

